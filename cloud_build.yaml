steps:
  - name: node:14.16.1
    entrypoint: npm
    args: [ "install" ]
  - name: node:14.16.1
    entrypoint: npm
    args: [ "run", "create-env" ]
    env:
      - 'REACT_APP_API_BASE_PATH=${_API_BASE_PATH}'
      - 'REACT_APP_API_KEY=${_API_KEY}'
      - 'REACT_APP_AUTH_DOMAIN=${_AUTH_DOMAIN}'
      - 'REACT_APP_PROJECT_ID=${_PROJECT_ID}'
      - 'REACT_APP_STORAGE_BUCKET=${_STORAGE_BUCKET}'
      - 'REACT_APP_MESSAGING_SENDER_ID=${_MESSAGING_SENDER_ID}'
      - 'REACT_APP_APP_ID=${_APP_ID}'
      - 'REACT_APP_MEASUREMENT_ID=${_MEASUREMENT_ID}'
  - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
    entrypoint: 'bash'
    args: ['-c', 'gcloud config set app/cloud_build_timeout 1600 && gcloud app deploy']
timeout: '1600s'
